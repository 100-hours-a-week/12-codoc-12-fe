#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

commit_msg=$(awk 'NF && $1 !~ /^#/' "$1" | head -n 1)

pattern='^\[(feat|fix|remove|refactor|chore|test|docs|deploy|hotfix)\]([[:space:]]+#[[:space:]]*[0-9]+)?[[:space:]]+.+'

if ! printf '%s' "$commit_msg" | grep -Eq "$pattern"; then
  echo "Invalid commit message."
  echo "Format: [tag] #<number> <message> (issue number optional)"
  echo "Example: [feat] #10 add hospital search API"
  exit 1
fi
